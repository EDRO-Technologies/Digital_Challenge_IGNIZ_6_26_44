{
  "swagger": "2.0",
  "info": {
    "description": "NGDU Graph API",
    "version": "1.0.0",
    "title": "NGDU Service"
  },
  "host": "localhost:8000",
  "basePath": "/api",
  "tags": [
    {
      "name": "NGDU",
      "description": "Endpoints for NGDU hierarchical data"
    }
  ],
  "schemes": ["http", "https"],
  "paths": {
    "/ngdu/list": {
      "get": {
        "tags": ["NGDU"],
        "summary": "Get list of NGDU",
        "description": "Returns all NGDU (oil production directorates).",
        "parameters": [
          {
            "in": "query",
            "name": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "NGDU list retrieved",
            "schema": {
              "type": "object",
              "properties": {
                "statusCode": { "type": "number" },
                "message": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/ObjectsItem"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/ngdu/list/tables": {
      "get": {
        "tags": ["NGDU"],
        "summary": "Get list of all variaty of objects",
        "parameters": [
          {
            "in": "query",
            "name": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Objects list retrieved",
            "schema": {
              "type": "object",
              "properties": {
                "statusCode": { "type": "number" },
                "message": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/ObjectsItem"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/ngdu/graph": {
      "post": {
        "tags": ["NGDU"],
        "summary": "Build hierarchical graph",
        "description": "Returns all nodes and links under selected entity based on chosen topology.",
        "parameters": [
          {
            "in": "body",
            "name": "graphRequest",
            "required": true,
            "schema": {
              "$ref": "#/definitions/GetGraphRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Graph generated successfully",
            "schema": {
              "type": "object",
              "properties": {
                "statusCode": { "type": "number" },
                "message": {
                  "$ref": "#/definitions/GetGraphResponse"
                }
              }
            }
          }
        }
      }
    },
    "/ngdu/object-exists": {
      "post": {
        "tags": ["NGDU"],
        "summary": "Checks if object exists",
        "description": "Returns boolean if object exists",
        "parameters": [
          {
            "in": "body",
            "name": "request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/NgduItem"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Graph generated successfully",
            "schema": {
              "type": "object",
              "properties": {
                "statusCode": { "type": "number" },
                "message": {
                  "type": "object",
                  "properties": {
                    "exists": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/ngdu/get-object-name": {
      "post": {
        "tags": ["NGDU"],
        "summary": "Checks if object exists",
        "description": "Returns boolean if object exists",
        "parameters": [
          {
            "in": "body",
            "name": "request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/NgduItem"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Graph generated successfully",
            "schema": {
              "type": "object",
              "properties": {
                "statusCode": { "type": "number" },
                "message": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/ngdu/is-connected": {
      "post": {
        "tags": ["NGDU"],
        "summary": "Checks if object exists",
        "description": "Returns boolean if object exists",
        "parameters": [
          {
            "in": "body",
            "name": "request",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "source": {
                  "$ref": "#/definitions/NgduItem"
                },
                "target": {
                  "$ref": "#/definitions/NgduItem"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Graph generated successfully",
            "schema": {
              "type": "object",
              "properties": {
                "statusCode": { "type": "number" },
                "message": {
                  "type": "object",
                  "properties": {
                    "connected": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "ObjectsItem": {
      "type": "object",
      "properties": {
        "id": { "type": "number" },
        "name": { "type": "string" }
      }
    },
    "NgduItem": {
      "type": "object",
      "properties": {
        "id": { "type": "number" },
        "type": { "type": "string" }
      }
    },
    "GetGraphRequest": {
      "type": "object",
      "properties": {
        "topology": {
          "type": "string",
          "enum": ["organizational", "geological"]
        },
        "type": {
          "type": "string",
          "enum": ["cdng", "kust", "mest", "ngdu", "obj", "plast", "well"]
        },
        "id": { "type": "number" }
      },
      "required": ["topology", "type", "id"]
    },

    "GetGraphResponse": {
      "type": "object",
      "properties": {
        "nodes": {
          "type": "array",
          "items": { "$ref": "#/definitions/Node" }
        },
        "links": {
          "type": "array",
          "items": { "$ref": "#/definitions/Links" }
        },
        "upperNodes": {
          "type": "array",
          "items": { "$ref": "#/definitions/Node" }
        },
        "upperLinks": {
          "type": "array",
          "items": { "$ref": "#/definitions/Links" }
        }
      }
    },

    "Node": {
      "type": "object",
      "properties": {
        "id": { "type": "number" },
        "name": { "type": "string" },
        "type": {
          "type": "string",
          "enum": ["cdng", "kust", "mest", "ngdu", "obj", "plast", "well"]
        }
      }
    },

    "Links": {
      "type": "object",
      "properties": {
        "sourceId": { "type": "number" },
        "targetId": { "type": "number" }
      }
    }
  }
}
